XCOMM $XConsortium: Imakefile /main/23 1995/11/07 19:46:53 gildea $
XCOMM $XFree86: xc/config/makedepend/Imakefile,v 3.3 1996/01/05 13:07:25 dawes Exp $

    SRCS = include.c main.c parse.c pr.c cppsetup.c ifparser.c 
    OBJS = include.o main.o parse.o pr.o cppsetup.o ifparser.o 

#if HasGcc && !defined(PreIncDir)
#define PreIncDir /usr/local/lib/gcc-include
#endif
#ifdef PreIncDir
PREINCDIR = PreIncDir
PREINC_DEFINES = -DPREINCDIR=\"$(PREINCDIR)\"
#endif
#ifndef StdIncDir
#define StdIncDir /usr/include
#endif
STDINCDIR = StdIncDir
STDINC_DEFINES = -DINCLUDEDIR=\"$(STDINCDIR)\"
#ifdef PostIncDir
POSTINCDIR = PostIncDir
POSTINC_DEFINES = -DPOSTINCDIR=\"$(POSTINCDIR)\"
#endif
INC_DEFINES = $(PREINC_DEFINES) $(STDINC_DEFINES) $(POSTINC_DEFINES)
OSUF = .Osuf
OSUF_DEFINES = -DOBJSUFFIX=\"$(OSUF)\"
MAIN_DEFINES = $(INC_DEFINES) $(SIGNAL_DEFINES) $(OSUF_DEFINES)
INCLUDES = -I$(IMAKESRC) -I$(TOP)/include

 DEPLIBS =

#if defined(MacIIArchitecture) || defined(SequentArchitecture) || defined(i386ScoArchitecture)
 XBSDLIB = /**/
#endif

AllTarget(ProgramTargetName(makedepend))

/*
 * bootstrapping: want to build the real makedepend
 * only after we've run "make depend" here.  That way
 * the program has the right dependencies for clearmake.
 * Save the bootstrap original files so they can be winked in
 * to other views.
 */

#if HasClearmake
bootstrap:
	$(MAKE) -f Makefile.proto makedepend
	$(MAKE) -f Makefile.proto depend
	test -d bootstrap || mkdir bootstrap
	$(MV) *.o makedepend bootstrap
	$(MAKE) -f Makefile.proto makedepend

clean::
	$(RM) -r bootstrap
#else
bootstrap:
#endif /* HasClearmake */

clean::
	$(RM) Makefile.proto

#undef InstallManPage
#define InstallManPage(file,dest) /* as nothing */
#if CrossCompiling
ComplexHostProgramTarget(makedepend)
#else
ComplexProgramTarget(makedepend)
#endif

SpecialCObjectRule(main,$(ICONFIGFILES),$(MAIN_DEFINES))

InstallManPageLong(mkdepend,$(MANDIR),makedepend)

#ifdef OS2Architecture
all::
	$(CP) ProgramTargetName(makedepend) /
#endif

InstallLinkKitNamedProg(makedepend,makedepend,$(LINKKITDIR)/config/makedepend)
