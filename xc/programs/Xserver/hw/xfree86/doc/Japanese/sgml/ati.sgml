<!doctype linuxdoc system>
<article>

<!-- Title information -->
<!-- ....1.........2.........3.........4.........5.........6...... -->
<title>ATI ボードの README
<author>Marc Aurele La France
<date>1995 年 5 月 8 日
<trans> 岡本　一幸 Kazuyuki Okamoto &lt;ikko-@pacific.rim.or.jp&gt;
<abstract>
本書は XF86_Mono, XF86_VGA16 と XF86_SVGA サーバーで使用している 
XFree86 ATI VGA ドライバに関する README です。
Mach8, Mach32 若くは Mach64 アクセラレータが搭載されている ATI グラ
フィックボードの使用者はアクセラレータサーバー (XF86_Mach8,XF86_Mach32
若くは XF86_Mach64) を使用するべきです。非アクセラレータサーバー 
(XF86_Mono, XF86_VGA16 と XF86_SVGA) も稼働しますが、その能力を生かし
切れません。
</abstract>

<!-- Table of contents -->
<toc>

<!-- Begin the document -->

<sect> ATI VGA ドライバとは何か ?<p>
 ATI VGA ドライバは XFree86 用の 256 色, 16 色と白黒のドライバです。
このドライバは SuperVGA として働かないもの(いくつかの初期の Mach8 と
Mach32) を除いた全ての ATI ビデオアダプタをサポートします。
次のおおよその (x/y = (1 + sqrt(5))/2 なる黄金分割比を基にした) 最大解
像度はボードに搭載している使用可能なビデオメモリ（とモニターの能力）に
依存します。:

<verb>
    256k    640x409x256    896x585x16
    512k    896x585x256   1280x819x16
    1M     1280x819x256  1824x1149x16</verb>
また、より高い解像度は 1M 以上のビデオメモリを搭載した（Mach64ではな
く）Mach32 で表示可能です。<p>
白黒サーバーは使用可能なビデオメモリの最大の 1/4 を使用するので、白黒
での最大解像度は 16 色モードと同じなのです。<p>
<sect> ATI VGA Wonder ドライバ では *出来ない事* は何か？<p>
このドライバはピクセルあたり 8 ビット以上の深さを未だサポートしてませ
ん。
お手元のマニュアルにグラフィックアダプタが 256 色以上のモードをサポー
トしていると記載があっても、ATI VGA Wonder ドライバが 256 色以上のモー
ドを使っていないのです。<p>
ATI VGA ドライバはアクセラレータドライバではありません。お手元のボ
ードが Mach8, Mach32 または Mach64 ビデオコントローラを搭載している場
合、ドライバはグラフィックボードのアクセラレータ機能を使用しません。
(Mach32 用と Mach64 用のアクセラレータに統合されている) ドライバは VGA 
ボードだけを使用します。この例は分かりにくいですが、何とか動作します。<p>
<sect> どのようなビデオアダプタでドライバが動作するか？<p>
以下の ATI ビデオコントローラチップを搭載しているほとんどのボードでこ
のドライバは動作します。
<verb>
VGA Wonder シリーズ:  18800, 18800-1, 28800-2, 28800-4, 28800-5, 28800-6
    Mach32 シリーズ:  68800-3, 68800-6, 68800AX, 68800LX
    Mach64 シリーズ:  88800CX, 88800GX</verb>
いくつかの初期型の Mach32 ボードがこのドライバで動作しないのは、VGA 機
能を持っていないからです。
また同様の理由で、 VGA Wonder シリーズからビデオコントローラを搭載して
いるボード（または VGA パススルーコネクタから接続する場合）を除いて初
期型の Mach8 ボードも動作しません。<p>
これらのボードでは様々なクロックジェネレータと RAMDAC が使用可能です。
詳細は XF86Config の節をご覧ください。
これらのボードはマウスがあってもなくても使用可能です。（ISA ボードの場
合だけですが）マウスが必要な場合、十分使える ATIXL バスマウスか、
Logitech バスマウスプロトコルを使用しているマウスかどちらかを使ってく
ださい。<p>
VGA Wonder V3 ボードは 18800 ビデオコントローラを搭載し、水晶発振子に
よってドットクロックを生成しています。
VGA Wonder V4 ボードは 18800-1 と水晶発振子を搭載しています。
VGA Wonder V5 ボードもまた 18800-1 を搭載していますが、18810 クロック
ジェネレータを搭載しています。
VGA Wonder+ ボードは 28800-2 と 18810 を搭載しています。
その他の ATI のボードの名称の決め方の慣習（昔からあったもの）では名前
の一部分を省略しています。<p>
<!-- The VGA Wonder series was also available through ATI's OEM channel under the
name VGA1024.
Thus, the ATI VGA driver also supports VGA1024, VGA1024D, VGA1024XL,
VGA1024DXL and VGA1024VLB boards, among others. -->
VGA Wonder シリーズはまた、ATI の OEM 先から VGA1024 という名称で発売
しています。
従って、ATI VGA ドライバは VGA1024, VGA1024D, VGA1024XL, VGA1024DXL と 
VGA1024VLB ボードやその類をサポートしています。<p>
<sect>XF86Config ファイルに何を書いたら良いでしょう？<p>
チップセットが構成を自動検出するでしょう。
このドライバでのチップセットの名称は "vgawonder" です。
これを "ati" だとか "mach64" と指定した場合、XF86Config にどんなクロッ
クを指定しても無視します(この時、探査したクロックを使用する事になりま
す）。
以前のバージョンのドライバでサポートしていたクロックの値がこのバージョ
ンでは当てはまらないことがありますのでこの方法で確認してください。<p>
XF86Config に指定する clocks 行はボードが生成するドットクロックに依存
したものになります。<p>
全てのボードで、以下の内の一つのクロック（またはそれらの最初の部分）の
設定はボードが生成するドットクロックに依存したものになります。:
<verb>
水晶発振子 (VGA Wonder V3 と V4 ボード のみ):

  Clocks  50.175  56.644   0.000  44.900  44.900  50.175   0.000  36.000
          25.088  28.322   0.000  22.450  22.450  25.088   0.000  18.000
          16.725  18.881   0.000  14.967  14.967  16.725   0.000  12.000
          12.544  14.161   0.000  11.225  11.225  12.544   0.000   9.000</verb>
<verb>
ATI 18810 クロックジェネレータ:

  Clocks  30.240  32.000  37.500  39.000  42.954  48.771   0.000  36.000
          40.000  56.644  75.000  65.000  50.350  56.640   0.000  44.900
          15.120  16.000  18.750  19.500  21.477  24.386   0.000  18.000
          20.000  28.322  37.500  32.500  25.175  28.320   0.000  22.450
          10.080  10.667  12.500  13.000  14.318  16.257   0.000  12.000
          13.333  18.881  25.000  21.667  16.783  18.880   0.000  14.967
           7.560   8.000   9.375   9.750  10.739  12.193   0.000   9.000
          10.000  14.161  18.750  16.250  12.586  14.160   0.000  11.225</verb>
<verb>
ATI 18811-0 と ATI 18812-0 クロックジェネレータ:

  Clocks  30.240  32.000 110.000  80.000  42.954  48.771  92.400  36.000
          39.910  44.900  75.000  65.000  50.350  56.640   0.000  44.900
          15.120  16.000  55.000  40.000  21.477  24.386  46.200  18.000
          19.955  22.450  37.500  32.500  25.175  28.320   0.000  22.450
          10.080  10.667  36.667  26.667  14.318  16.257  30.800  12.000
          13.303  14.967  25.000  21.667  16.783  18.880   0.000  14.967
           7.560   8.000  27.500  20.000  10.739  12.193  23.100   9.000
           9.978  11.225  18.750  16.250  12.588  14.160   0.000  11.225</verb>
<verb>
ATI 18811-1 と ATI 18811-2 クロックジェネレータ:

  Clocks 135.000  32.000 110.000  80.000 100.000 126.000  92.400  36.000
          39.910  44.900  75.000  65.000  50.350  56.640   0.000  44.900
          67.500  16.000  55.000  40.000  50.000  63.000  46.200  18.000
          19.955  22.450  37.500  32.500  25.175  28.320   0.000  22.450
          45.000  10.667  36.667  26.667  33.333  42.000  30.800  12.000
          13.303  14.967  25.000  21.667  16.783  18.880   0.000  14.967
          33.750   8.000  27.500  20.000  25.000  31.500  23.100   9.000
           9.978  11.225  18.750  16.250  12.588  14.160   0.000  11.225</verb>
Mach32 と Mach64 を持っている人は最初の 32 個の周波数だけを指定してく
ださい。<p>
また、Mach64 ボードの場合に新しい ATI 18818 クロックジェネレータチップ
を搭載している可能性があります。
ブート時に、ビデオ BIOS の初期化は 18818 に２つの少々異なるドットクロッ
クの組み合わせを設定します。
この動作をドライバでそっくりまねする方法は未だ見つかっていません。
もう少しすれば、次の内の一つのクロックの指定が使用可能になるでしょう。:
<verb>
ATI 18818 クロックジェネレータ (一次 BIOS の設定):

  Clocks   0.000 110.000 126.000 135.000  50.350  56.644  63.000  72.000
           0.000  80.000  75.000  65.000  40.000  44.900  49.500  50.000
           0.000  55.000  63.000  67.500  25.175  28.322  31.500  36.000
           0.000  40.000  37.500  32.500  20.000  22.450  24.750  25.000</verb>
<verb>
ATI 18818 クロックジェネレータ (二次 BIOS の設定):

  Clocks   0.000 110.000 126.000 135.000  25.175  28.322  31.500  36.000
           0.000  80.000  75.000  65.000  40.000  44.900  49.500  50.000
           0.000  55.000  63.000  67.500  12.588  14.161  15.750  18.000
           0.000  40.000  37.500  32.500  20.000  22.450  24.750  25.000</verb>
ATI ボード（とそのソックリさん全て）に搭載しているその他のクロックジェ
ネレータは上記でゼロになっている部分がゼロでない値になる（又はその逆）
でしょう。<p>
このクロックの順番は非常に *重要です*。
Mach32 と Mach64 を所有している人はクロックの順番がアクセラレータサー
バ用に使うクロックの順番とは異なることに注意してください。<p>
"X -probeonly" コマンドで探査したクロックはそのボードが上記のボードの
うちのどれであるかを判定する助けになるでしょう。
サーバーが一貫して知らないクロックジェネレータであると知らせてくる場合
は、標準エラー出力の内容を電子メールで送付してください。<p>
モードは XFree86 の文書ディレクトリに入っている情報から引き出してきま
しょう。
XF86Config の該当するスクリーン (screen) セクションのディスプレイ
(display) サブセクションに "modes" 行を指定しない場合にドライバーは標
準値のモードを生成し、使用しようとします。
標準モードの調整用数値は事実上サーバーが起動したモード（通常テキスト
モード）の値から引き出してきます。<p>
<sect> 他の版からのバージョンアップ <p>
バージョン 2.1.1 より以前の XFree86 用か alpha Mach64 用の Xconfig を
持っている場合は、このバージョンでそのファイルを使うには変更する必要が
あります。
特に、古い XFree86 で使っていた Xconfig から派生した XF86Config を使っ
て、サーバーを -probeonly オプションを付けて実行してください。
この方法でクロックを探査できます。
この探査結果を用いて XF86Config の clocks の所を書き換えてください。
そして、チップセットの指定を "vgawonder" と変更しましょう。<p>
<!-- You should not need to change your mode definitions except for those that are
already driving your monitor close to its tolerance limits.
You might need to change the dot clock used to one with the next lower (or
higher) frequency. -->
すでにモニターが十分使用に耐える程度にドライバが動作してない場合はモー
ド定義を変更する必要があります。
隣の周波数より低い（又は高い）ドットクロックを使用している場合は変更の
必要はありません。<p>
<sect> ドライバの履歴は？<p>
ドライバの完全な履歴はあまり定かではありません。
次の記述は不完全かつ不正確かもしれません。<p>
<bf>Per Lindqvist</bf> (<it>pgd@compuram.bbt.se</it>) 氏が最初に ATI 
VGA Wonder XL ドライバを初期型の ATI カード用に X386 1.1a 上に移植した
らしいです。
この最初のドライバは <bf>Roell</bf> 氏によって書かれた ATI では
動作しないドライバを実際に基にしています。
そして <bf>Doug Evans</bf> (<it>dje@cygnus.com</it>) 氏が その他の全て
の ATI カードでドライバが動作するかどうか確認しながら、ATI VGA Wonder 
XL ドライバを移植しました。<p>
<bf>Rik Faith</bf> (<it>faith@cs.unc.edu</it>) 氏は Doug Evans 氏の 
X11R4 用のドライバを 1992 年、夏に手にいれ、X11R5 の一部の X386 にプロ
グラムを移植しました。
これを XFree86 の一部へ引き継ぎました。<p>
著者 (<bf>Marc La France</bf>) は Rik 氏の VGA Wander カード用のドライ
バを引き継ぎました。<p>
<sect> 種々の注意事項<p>
80MHz 以上のドットクロックは VGA Wonder コントローラがピクセル多重を行
うようにしなければ使うことは出来ません。<p>
8bpp 色以上の深さをサポートするには現状の RAMDAC の使い方を止めなけれ
ばいけません。<p>
ATI 18818 クロックジェネレータをサポートするには大掃除が必要です。<p>
バグレポートやコメントなどを
<bf>Marc Aurele La France</bf>, <url url="mailto:tsi@ualberta.ca"
name="&lt;<it>tsi@ualberta.ca</it>&gt;">まで電子メールを下さい。
<hrule>
このファイルは xc/programs/Xserver/hw/xfree86/doc/sgml/ati.sgml,v 3.5 
1995/06/25 09:53:45   を、岡本  一幸 
( Kazuyuki Okamoto <url url="mailto:ikko-@pacific.rim.or.jp"
name="&lt;ikko-@pacific.rim.or.jp&gt;"> ) が XFree86 3.1.2 を
日本でインストールする人向けに和訳したものです。ここがおかしいとか、
ここはこうしたほうがいいといったご意見がありましたら、電子メールで
お知らせ下さい。
原文の著作権は XFree86 プロジェクト社にあります。この和訳の著作権は 
XFree86 プロジェクト社と岡本　一幸にありますが、この和訳の不具合は私
に、電子メールで送って下さい。
<verb>
$XFree86: xc/programs/Xserver/hw/xfree86/doc/Japanese/sgml/ati.sgml,v 3.1 1995/10/22 10:44:40 dawes Exp $
</verb>
<hrule>
&lsqb;EOF&rsqb;

</article>
