XCOMM $XConsortium: Imakefile /main/3 1996/01/26 14:30:30 kaleb $
XCOMM $XFree86: xc/programs/Xserver/hw/xfree86/vga256/drivers/chips/Imakefile,v 3.10 1996/10/17 15:20:39 dawes Exp $

XCOMM Some possible options to include in the defines below
XCOMM
XCOMM CT_LINE_ACCL:     This enables the use of the line acceleration
XCOMM                   code.
XCOMM CT_POST_312F_ACCL:There is also some additional acceleration in the 
XCOMM                   server for Glyph's, Stipples and Bitmap copies. Also
XCOMM                   some of the accelerated code has been ported to the
XCOMM                   HiQV architecture. These were written after the feature
XCOMM                   freeze for XFree 3.2. If they cause a problem this new
XCOMM                   code can be completely removed by deleting this option
XCOMM CT_24BPP_TEXT:    This is an extremely late addition to the acceleration
XCOMM                   code. It has been tested on only a few machines.

#include <Server.tmpl>

SRCS = ct_driver.c ct_bank.s ct_BitBlt.c ct_cursor.c ct_FillRct.c ct_blt16.c \
       ct_blitter.c ct_blitmm.c ct_blithi.c ct_line.c ct_seg.c ct_linehi.c \
       ct_seghi.c ct_lline.c ct_lline16.c ct_lline24.c ct_solid.c \
       ct_solidmm.c ct_solidhi.c ct_FillSt.c ct_alloc.c ct_pci.c ct_teblt8.c \
       ct_teblt8mm.c ct_teblt8hi.c ct_textblt.s ct_colexp.c ct_colexpmm.c \
       ct_colexphi.c

OBJS = ct_driver.o ct_bank.o ct_BitBlt.o ct_cursor.o ct_FillRct.o ct_blt16.o \
       ct_blitter.o ct_blitmm.o ct_blithi.o ct_line.o ct_seg.o ct_linehi.o \
       ct_seghi.o ct_lline.o ct_lline16.o ct_lline24.o ct_solid.o \
       ct_solidmm.o ct_solidhi.o ct_FillSt.o ct_alloc.o ct_pci.o ct_teblt8.o \
       ct_teblt8mm.o ct_teblt8hi.o ct_textblt.o ct_colexp.o ct_colexpmm.o \
       ct_colexphi.o

DEFINES = -DPSZ=8 -DCT_LINE_ACCL -DCT_POST_312F_ACCL -DCT_24BPP_TEXT

#if XF86LinkKit
INCLUDES = -I. -I../../../include -I../../../include/X11 -I../..
#else
INCLUDES = -I. -I$(XF86COMSRC) -I$(XF86HWSRC) -I$(XF86OSSRC) \
           -I$(SERVERSRC)/cfb -I$(SERVERSRC)/mfb \
           -I$(SERVERSRC)/mi -I../../vga -I$(SERVERSRC)/include \
	   -I$(INCLUDESRC) -I$(FONTINCSRC)
#endif

#if MakeHasPosixVariableSubstitutions
SubdirLibraryRule($(OBJS))
#endif

NormalLibraryObjectRule()
NormalAsmObjectRule()

NormalRelocatableTarget(ct_drv,$(OBJS))

ObjectFromSpecialSource(ct_seg, ct_line, -DPOLYSEGMENT)
ObjectFromSpecialSource(ct_blitmm, ct_blitter, -DCHIPS_MMIO)
ObjectFromSpecialSource(ct_solidmm, ct_solid, -DCHIPS_MMIO)
ObjectFromSpecialSource(ct_lline16, ct_lline, -DPSZ=16)
ObjectFromSpecialSource(ct_lline24, ct_lline, -DPSZ=24)
ObjectFromSpecialSource(ct_teblt8mm, ct_teblt8, -DCHIPS_MMIO)
ObjectFromSpecialSource(ct_colexpmm, ct_colexp, -DCHIPS_MMIO)
ObjectFromSpecialSource(ct_linehi, ct_line, -DCHIPS_HIQV)
ObjectFromSpecialSource(ct_seghi, ct_line, -DCHIPS_HIQV -DPOLYSEGMENT)
ObjectFromSpecialSource(ct_blithi, ct_blitter, -DCHIPS_MMIO -DCHIPS_HIQV)
ObjectFromSpecialSource(ct_solidhi, ct_solid, -DCHIPS_MMIO -DCHIPS_HIQV)
ObjectFromSpecialSource(ct_teblt8hi, ct_teblt8, -DCHIPS_MMIO -DCHIPS_HIQV)
ObjectFromSpecialSource(ct_colexphi, ct_colexp, -DCHIPS_MMIO -DCHIPS_HIQV)

InstallLinkKitNonExecFile(ct_driver.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_bank.s,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_BitBlt.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_FillRct.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_cursor.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_blt16.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_blitter.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_line.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_lline.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_solid.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_FillSt.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_alloc.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_pci.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(Imakefile,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_BltHiQV.h,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_BlitMM.h,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_Blitter.h,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_driver.h,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_lline.h,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_teblt8.c,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_textblt.s,$(LINKKITDIR)/drivers/vga256/chips)
InstallLinkKitNonExecFile(ct_colexp.c,$(LINKKITDIR)/drivers/vga256/chips)

DependTarget()

