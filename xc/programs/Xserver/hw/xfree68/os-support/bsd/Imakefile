XCOMM $XConsortium: Imakefile /main/6 1996/01/14 19:01:58 kaleb $





XCOMM $XFree86: xc/programs/Xserver/hw/xfree86/os-support/bsd/Imakefile,v 3.13 1996/10/16 14:41:55 dawes Exp $

#include <Server.tmpl>

#if defined(FreeBSDArchitecture) || defined(NetBSDArchitecture) || defined(OpenBSDArchitecture)
#if BuildXInputExt
# if JoystickSupport
 JOYSTICK_SRC = bsd_jstk.c
# endif
# if BuildDynamicLoading
SHARED_CFLAGS = PositionIndependentCFlags
# else
#  if JoystickSupport
 JOYSTICK_OBJ = bsd_jstk.o
#  endif
# endif
#endif
#endif

SRCS = bsd_init.c bsd_video.c bsd_io.c bsd_VTsw.c $(JOYSTICK_SRC)

OBJS = bsd_init.o bsd_video.o bsd_io.o bsd_VTsw.o $(JOYSTICK_OBJ)

INCLUDES = -I$(XF68COMSRC) -I$(XF68OSSRC) -I. -I$(SERVERSRC)/include \
           -I$(XINCLUDESRC)

#if HasNetBSDApertureDriver
APDEFINES = -DHAS_APERTURE_DRV
#endif

DEFINES = $(CONSDEFINES) $(APDEFINES) $(IOPERMDEFINES)

SubdirLibraryRule($(OBJS))
NormalLibraryObjectRule()

#if BuildXInputExt
# if BuildDynamicLoading
#  if JoystickSupport
AllTarget(bsd_jstk.o)
SpecialObjectRule(bsd_jstk.o,bsd_jstk.c,$(SHARED_CFLAGS))
#  endif
# endif
#endif

#if 0
ObjectFromSpecialSource(bios_devmem,../shared/bios_devmem,/**/)
ObjectFromSpecialSource(mapVT_noop,../shared/mapVT_noop,/**/)
ObjectFromSpecialSource(ioperm_noop,../shared/ioperm_noop,/**/)
ObjectFromSpecialSource(std_kbdEv,../shared/std_kbdEv,/**/)
ObjectFromSpecialSource(posix_tty,../shared/posix_tty,/**/)
ObjectFromSpecialSource(std_mouse,../shared/std_mouse,/**/)
ObjectFromSpecialSource(std_mseEv,../shared/std_mseEv,/**/)
#endif

DependTarget()
